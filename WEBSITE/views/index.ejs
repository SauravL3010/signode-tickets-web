<%- include("./partials/head.ejs") %>

<br>
<br>






<input type="text" id="myInput" onkeyup="searchTable()" placeholder="Search for Orders, PO , Ship To, Via, Status, Date ..">




<!-- TABLE VISIBLE ONLY WHILE SEARCHING -->


    <table class="table-center" id="table-mar" style="display: none;">

        <h5 style="color:rgb(136,0,0); display: none;" id="mar-title">Markham</h5>
    
    
        <thead>
            <th>Order #</th>
            <th>PO #</th>
            <th>Ship To</th>
            <th>Via</th>
            <th>Date Received</th>
            <th>Month</th>
            <th>Status</th>
        </thead>
        <tbody id="mainList-mar">
    
    
            <% if (marlst.length != 0) { %>
    
                <% marlst.forEach((order)=>{ %>
    
                    <tr>
                        <td class='sig-order'><a class='sig-links' href="/orders/<%= order._id %>"><%= order._id %></a></td>
                        <td><%= order["PO"] %></td>
                        <td><%= order["shipTo"] %></td>
                        <td><%= order["via"] %></td>
                        <td><%= order["dateReceived"].toUTCString().slice(4, order["dateReceived"].toUTCString().indexOf("GMT")) %></td>
                        <td><%= order["month"] %></td>
                        <td><%= order["status"] %></td>
                    </tr>
                    
    
    
                <% }) %>
            <% } else { %>
                <tr>
                    <td>NO</td>
                    <td>ORDERS</td>
                    <td>YET</td>
                </tr>
            <% } %>
    
    
        </tbody>
    
    </table>
    
    
    
    
    <table class="table-center" id="table-surr" style="display: none;">
    
    
        <h5 style="color:rgb(136,0,0); display: none;" id="surr-title">Surrey</h5>
    
    
        <thead>
            <th>Order #</th>
            <th>PO #</th>
            <th>Ship To</th>
            <th>Via</th>
            <th>Date Received</th>
            <th>Month</th>
            <th>Status</th>
        </thead>
        <tbody id="mainList-surr">
    
    
            <% if (surrlst.length != 0) { %>
    
                <% surrlst.forEach((order)=>{ %>
    
                    <tr>
                        <td class='sig-order'><a class='sig-links' href="/orders/<%= order._id %>"><%= order._id %></a></td>
                        <td><%= order["PO"] %></td>
                        <td><%= order["shipTo"] %></td>
                        <td><%= order["via"] %></td>
                        <td><%= order["dateReceived"].toUTCString().slice(4, order["dateReceived"].toUTCString().indexOf("GMT")) %></td>
                        <td><%= order["month"] %></td>
                        <td><%= order["status"] %></td>
                    </tr>
                    
    
    
                <% }) %>
            <% } else { %>
                <tr>
                    <td>NO</td>
                    <td>ORDERS</td>
                    <td>YET</td>
                </tr>
            <% } %>
    
    
        </tbody>
    
    </table>


<!-- /////////////////////////////////////// END OF TABLES ///////////////////////////////////////// -->















<img class="sig-logo" src="/images/SignodeLogo_RGB_FOR PPT AND SCREEN USE.png" alt="SIGNODE LOGO GOES HERE" height="50%" width="50%">

<!-- ALL ORDERS LINK IS DEPRECATED -->



<div class="">
    <button class="button font-inherit"><a class='sig-links-main' href="/mainPage/markham">Markham</a></button>
</div>

<br>

<div class="">
    <button class="button font-inherit"><a class='sig-links-main' href="/mainPage/surrey">Surrey</a></button>
</div>








<script>

    
function searchTable() {


    let input, tableMar, tableSurr, mainMar, mainSurr, marrtitle, surrtitle;

    tableMar = document.getElementById('table-mar');
    tableSurr = document.getElementById('table-surr');

    input = document.getElementById('myInput');
    target = input.value.toLowerCase();

    mainMar = document.getElementById("mainList-mar");
    mainSurr = document.getElementById("mainList-surr");


    martitle = document.getElementById("mar-title");
    surrtitle = document.getElementById("surr-title");

    if (input.value.length > 0){

        tableMar.style.display = "";
        tableSurr.style.display = "";

        martitle.style.display = "";
        surrtitle.style.display = "";

        [mainMar, mainSurr].forEach((main) => {
            for (let i=0; i<main.rows.length; i++){

                let order = main.rows[i].cells[0].textContent.toLowerCase().indexOf(target);
                let po = main.rows[i].cells[1].textContent.toLowerCase().indexOf(target);
                let shipTo = main.rows[i].cells[2].textContent.toLowerCase().indexOf(target);
                let via = main.rows[i].cells[3].textContent.toLowerCase().indexOf(target);
                let date = main.rows[i].cells[4].textContent.toLowerCase().indexOf(target);
                let month = main.rows[i].cells[5].textContent.toLowerCase().indexOf(target);
                let status= main.rows[i].cells[6].textContent.toLowerCase().indexOf(target);
                

                if(order > -1 || po > -1 || shipTo > -1 || via > -1 || date > -1 || status > -1 || month > -1){

                    main.rows[i].style.display = "";

                } else {

                    main.rows[i].style.display = "none";

                };
            }


        });

    } else {

        tableMar.style.display = "none";
        tableSurr.style.display = "none";

        martitle.style.display = "none";
        surrtitle.style.display = "none";

    };



};

</script>



<%- include("./partials/foot.ejs") %>